<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Geography Game</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    #map { width: 80%; max-width: 900px; margin: 20px auto; }
    #prompt { font-size: 24px; margin: 20px; }
    #feedback { font-size: 20px; color: green; }
    path { cursor: pointer; transition: fill 0.3s; }
    path:hover { fill: #ffcc00; }
  </style>
</head>
<body>

  <h1>Interactive Geography Game</h1>
  <div id="prompt">Click on: <strong id="country-name">Brazil</strong></div>
  <div id="map">
    <!-- SVG map will be inserted here -->
  </div>
  <div id="feedback"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.4/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson-client@3.1.0/dist/topojson-client.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.4/d3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/topojson-client@3.1.0/dist/topojson-client.min.js"></script>
<script>
  const width = 900, height = 500;
  const projection = d3.geoMercator().scale(140).translate([width / 2, height / 1.5]);
  const path = d3.geoPath().projection(projection);
  const svg = d3.select("#map").append("svg").attr("width", width).attr("height", height);

  const countryCodeMap = {
    "Brazil": "076",
    "Canada": "124",
    "China": "156",
    "Russia": "643",
    "Australia": "036",
    "India": "356"
  };

  let currentPrompt = "";

  function newRound() {
    const countryNames = Object.keys(countryCodeMap);
    currentPrompt = countryNames[Math.floor(Math.random() * countryNames.length)];
    document.getElementById("country-name").textContent = currentPrompt;
    document.getElementById("feedback").textContent = "";
  }

  d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(world => {
    const countries = topojson.feature(world, world.objects.countries).features;

    svg.append("g")
      .selectAll("path")
      .data(countries)
      .enter().append("path")
      .attr("d", path)
      .attr("fill", "#ccc")
      .attr("stroke", "#333")
      .on("click", function(event, d) {
        const countryId = d.id;
        const promptCode = countryCodeMap[currentPrompt];
        const feedback = document.getElementById("feedback");

        if (countryId === promptCode) {
          feedback.textContent = `✅ Correct! That is ${currentPrompt}.`;
          feedback.style.color = "green";
          setTimeout(newRound, 1500);
        } else {
          feedback.textContent = `❌ Incorrect. Try again.`;
          feedback.style.color = "red";
        }
      });

    newRound(); // start the game
  });
</script>


</body>
</html>
